# Server Configuration
PORT=4002
NODE_ENV=development

# Database Configuration (PostgreSQL)
# ==========================================
# LOCAL DEVELOPMENT (Docker Compose):
#   Uses PostgreSQL container from docker-compose.yml
DATABASE_URL="postgresql://user:password@localhost:5432/onboarding?schema=public&connection_limit=5&pool_timeout=10"
POSTGRES_URL="postgresql://user:password@localhost:5432/onboarding?schema=public"

# VERCEL PRODUCTION:
#   Vercel auto-injects these when you connect Vercel Postgres:
#   - POSTGRES_PRISMA_URL (or DATABASE_URL) → pooled connection for queries (use this!)
#   - POSTGRES_URL → direct connection for migrations
#   
#   IMPORTANT: For serverless, use POSTGRES_PRISMA_URL as your DATABASE_URL
#   It includes connection pooling which prevents timeout errors
#   
#   If using external database, add connection pooling params:
#   postgresql://user:pass@host:5432/db?schema=public&connection_limit=5&pool_timeout=10&connect_timeout=10

# Base URL Configuration
# For local development, this is auto-detected as http://localhost:4002
# For Vercel, this is auto-detected from VERCEL_URL
# Override manually if needed:
# APP_BASE_URL=https://your-custom-domain.com

# Preferred Domain (Redirect)
# If set, all requests to other domains (like auto-generated Vercel URLs)
# will be permanently redirected (301) to this domain
# Example: PREFERRED_DOMAIN=onboarding.yourdomain.com
# Leave empty to disable automatic redirects
PREFERRED_DOMAIN=

# GoHighLevel OAuth Configuration
# Get these from GHL Marketplace → Your App → Auth section
GHL_CLIENT_ID=your_ghl_client_id_here
GHL_CLIENT_SECRET=your_ghl_client_secret_here

# OAuth Redirect URI
# Auto-constructed from APP_BASE_URL if not set
# For local dev: http://localhost:4002/oauth/callback
# For Vercel: https://your-app.vercel.app/oauth/callback
# Only set this if you need to override the auto-detection:
# GHL_REDIRECT_URI=https://your-app.vercel.app/oauth/callback

# OAuth URLs (optional - defaults provided)
# GHL_AUTHORIZE_URL=https://marketplace.gohighlevel.com/oauth/authorize
# GHL_TOKEN_URL=https://services.leadconnectorhq.com/oauth/token

# OAuth Scopes (optional - defaults provided)
# GHL_SCOPES=courses.write courses.readonly products/prices.readonly products.readonly products.write products/prices.write products/collection.readonly products/collection.write payments/integration.readonly payments/subscriptions.readonly payments/custom-provider.readonly businesses.readonly locations.readonly locations/customValues.readonly funnels/page.readonly funnels/funnel.readonly funnels/pagecount.readonly funnels/redirect.readonly payments/orders.readonly payments/transactions.readonly

# GoHighLevel App Base URL
# Base URL for GoHighLevel app links in the widget
# Defaults to coursecreator360 whitelabel if not set
# For whitelabel: https://app.coursecreator360.com
# For standard GHL: https://app.gohighlevel.com
# GHL_APP_BASE_URL=https://app.gohighlevel.com

# Userpilot Analytics (optional)
# ==========================================
# Server-side tracking (webhook events) - Get from Userpilot Dashboard → Settings → API Keys
USERPILOT_API_KEY=your_production_api_key
USERPILOT_STAGE_API_KEY=your_staging_api_key
# USERPILOT_API_BASE=https://api.userpilot.io

# Client-side tracking (widget) - Get from Userpilot Dashboard → Settings → Installation
# This is your App Token (different from API Key)
USERPILOT_TOKEN=your_userpilot_app_token
USERPILOT_STAGE_TOKEN=your_staging_app_token

# CC360 Customers Admin API Configuration (REQUIRED)
# ==========================================
# API key for CC360 Customers Admin API - used to verify location authorization
# The widget will check this API to determine if it should show for a given location
# Get this API key from your CC360 Customers Admin dashboard
CC360_CUSTOMERS_API_KEY=your_cc360_api_key_here

# CC360 Customers Admin API Base URL
# Defaults to https://cc360-customers-admin/api if not set
# Only override if you need to use a different API endpoint
# CC360_CUSTOMERS_API_BASE_URL=https://cc360-customers-admin.vercel.app/api

# Widget Location Filter (OPTIONAL)
# ==========================================
# Optional pre-filter: If set, the widget will ONLY check the API for this specific locationId
# If NOT set, the widget will check the API for any detected locationId
# This is a performance optimization to skip API calls for non-matching locations
# Get your location ID from the GHL dashboard URL or browser console
# Example: WIDGET_LOCATION_ID_FILTER=VvBh6gKM4SGKWxShVh4F
WIDGET_LOCATION_ID_FILTER=

# Feature Flags
# ==========================================
# Enable/disable specific checklist items in the widget
# Set to "true" to enable, "false" to disable

# Connect Payments checklist item
# When disabled, the "Connect Payments" step will not appear in the widget
FEATURE_CONNECT_PAYMENTS_ENABLED=true

# Connect Domain checklist item
# When disabled, the "Connect a Domain" step will not appear in the widget
FEATURE_CONNECT_DOMAIN_ENABLED=true

