<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Onboarding Survey Widget</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #ffffff;
      min-height: 100vh;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
    }

    #root {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }

    .logo-container {
      text-align: center;
      padding: 20px 0;
      margin-bottom: 30px;
    }

    .logo-container img {
      height: 40px;
      width: auto;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <!-- React and ReactDOM from CDN -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel Standalone for JSX transformation -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Your React Component -->
  <script type="text/babel">
    const { useState } = React;

        const OnboardingSurveyWidget = () => {
          // Track the current step (0â€‘4) and the form values entered by the user.
          const [step, setStep] = useState(0);
          const [formData, setFormData] = useState({
            reason: "",
            profession: "",
            hasDomain: "",
            domain: "",
            courseIdea: "",
          });
          const [submitted, setSubmitted] = useState(false);

          // CourseCreator360 logo
          const logoUrl = "https://cc360-pages.s3.us-west-2.amazonaws.com/course-creator-360-logo.webp";

          // Total number of steps in the survey. This is used for the progress bar.
          const totalSteps = 5;

          /**
           * Update form data when inputs change. This helper merges the
           * partial update into the existing form state.
           * @param {object} updates A dictionary of key/value pairs to merge
           */
          const updateForm = (updates) => {
            setFormData((prev) => ({ ...prev, ...updates }));
          };

          /**
           * Advance to the next step. Submit the survey on the final step.
           */
          const handleNext = () => {
            if (step < totalSteps - 1) {
              setStep(step + 1);
            } else {
              // Final step â€“ mark as submitted
              setSubmitted(true);
              console.log("Survey submitted with data:", formData);
            }
          };

          /**
           * Return to the previous step. Hidden on the first step.
           */
          const handleBack = () => {
            if (step > 0) setStep(step - 1);
          };

          // Compute progress as a percentage. Steps are zero indexed so the
          // percentage goes from 0% on the first step up to 100% before
          // submission. We cap the width at 100% to avoid overflow on the
          // last step when submitted is true.
          const progressPercent = Math.min((step / (totalSteps - 1)) * 100, 100);

          // Determine if the primary action button should be disabled on each step.
          const isNextDisabled = () => {
            switch (step) {
              case 1:
                return !formData.reason;
              case 2:
                return !formData.profession;
              case 3:
                // If they have chosen yes then domain must be provided
                if (!formData.hasDomain) return true;
                if (formData.hasDomain === "yes" && !formData.domain) return true;
                return false;
              case 4:
                // Require a minimum of 40 characters for the course idea
                return formData.courseIdea.trim().length < 40;
              default:
                return false;
            }
          };

          /**
           * Render the contents for the current step. Each case returns JSX for
           * that portion of the form. The surrounding container and progress
           * bar are handled outside of this function.
           */
          const renderStep = () => {
            switch (step) {
              case 0:
                return (
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>
                      Welcome! We're so excited to have you <span role="img" aria-label="celebration">ðŸ™Œ</span>
                    </h2>
                    <p style={styles.subtext}>We have a few questions to personalize your experience.</p>
                  </div>
                );
              case 1:
                return (
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>What brings you to Course Creator 360?</h2>
                    <div style={styles.optionList}>
                      {[
                        { key: "exploring", label: "Just casually exploring." },
                        { key: "monetize", label: "I want to monetize my knowledge online." },
                        { key: "better", label: "I'm looking for a better solution for my online business." },
                      ].map((opt) => (
                        <label key={opt.key} style={styles.optionItem}>
                          <input
                            type="radio"
                            name="reason"
                            value={opt.key}
                            checked={formData.reason === opt.key}
                            onChange={() => updateForm({ reason: opt.key })}
                            style={styles.radio}
                          />
                          <span>{opt.label}</span>
                        </label>
                      ))}
                    </div>
                  </div>
                );
              case 2:
                return (
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>How would you describe yourself professionally?</h2>
                    <div style={styles.optionList}>
                      {[
                        { key: "coach", label: "Coach, teacher, or instructor." },
                        { key: "creator", label: "Content creator." },
                        { key: "freelancer", label: "Freelancer or consultant." },
                        { key: "entrepreneur", label: "Entrepreneur." },
                        { key: "other", label: "Other." },
                      ].map((opt) => (
                        <label key={opt.key} style={styles.optionItem}>
                          <input
                            type="radio"
                            name="profession"
                            value={opt.key}
                            checked={formData.profession === opt.key}
                            onChange={() => updateForm({ profession: opt.key })}
                            style={styles.radio}
                          />
                          <span>{opt.label}</span>
                        </label>
                      ))}
                    </div>
                  </div>
                );
              case 3:
                return (
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>Do you have an existing domain?</h2>
                    <p style={styles.subtext}>
                      A domain is the web address people type to reach your site (e.g. mybrand.com).
                    </p>
                    <div style={styles.optionList}>
                      {[
                        { key: "yes", label: "Yes" },
                        { key: "no", label: "No" },
                      ].map((opt) => (
                        <label key={opt.key} style={styles.optionItem}>
                          <input
                            type="radio"
                            name="hasDomain"
                            value={opt.key}
                            checked={formData.hasDomain === opt.key}
                            onChange={() => updateForm({ hasDomain: opt.key, domain: "" })}
                            style={styles.radio}
                          />
                          <span>{opt.label}</span>
                        </label>
                      ))}
                    </div>
                    {formData.hasDomain === "yes" && (
                      <input
                        type="text"
                        placeholder="e.g. mybrand.com"
                        value={formData.domain}
                        onChange={(e) => updateForm({ domain: e.target.value })}
                        style={styles.textInput}
                      />
                    )}
                  </div>
                );
              case 4:
                return (
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>Describe your course idea in as much detail as possible:</h2>
                    <textarea
                      placeholder="E.g. 'My course teaches busy parents how to cook 20-minute vegetarian meals...'"
                      value={formData.courseIdea}
                      onChange={(e) => updateForm({ courseIdea: e.target.value })}
                      style={styles.textArea}
                      rows={5}
                    />
                    <p style={styles.counter}>{formData.courseIdea.trim().length} / 40</p>
                  </div>
                );
              default:
                return null;
            }
          };

          // Render thankâ€‘you message once the survey is submitted.
          if (submitted) {
            return (
              <>
                <div style={styles.logoContainer}>
                  <img src={logoUrl} alt="Course Creator 360" style={styles.logo} />
                </div>
                <div style={styles.widgetWrapper}>
                  <div style={styles.progressContainer}>
                    <div style={{ ...styles.progressBar, width: "100%" }}></div>
                  </div>
                  <div style={styles.stepContainer}>
                    <h2 style={styles.heading}>
                      ðŸŽ‰ Thanks! We've received your responses.
                    </h2>
                    <p style={styles.subtext}>
                      You can now proceed to book your free onboarding call.
                    </p>
                  </div>
                </div>
              </>
            );
          }

          return (
            <>
              <div style={styles.logoContainer}>
                <img src={logoUrl} alt="Course Creator 360" style={styles.logo} />
              </div>
              <div style={styles.widgetWrapper}>
                {/* Progress bar */}
                <div style={styles.progressContainer}>
                  <div style={{ ...styles.progressBar, width: `${progressPercent}%` }}></div>
                </div>
                {/* Step content */}
                {renderStep()}
                {/* Navigation buttons */}
                <div style={styles.buttonRow}>
                  {/* Back button is hidden on the first step */}
                  {step > 0 ? (
                    <button style={{ ...styles.button, ...styles.backButton }} onClick={handleBack}>
                      Back
                    </button>
                  ) : (
                    <div style={{ flex: 1 }}></div>
                  )}
                  <button
                    style={{
                      ...styles.button,
                      ...styles.primaryButton,
                      opacity: isNextDisabled() ? 0.4 : 1,
                      cursor: isNextDisabled() ? "default" : "pointer",
                    }}
                    onClick={() => {
                      if (!isNextDisabled()) handleNext();
                    }}
                    disabled={isNextDisabled()}
                  >
                    {step === totalSteps - 1 ? "Submit" : "Next"}
                  </button>
                </div>
              </div>
            </>
          );
        };

        // CourseCreator360 branding styles
        const styles = {
          logoContainer: {
            textAlign: "center",
            marginBottom: 30,
          },
          logo: {
            height: 40,
            width: "auto",
          },
          widgetWrapper: {
            maxWidth: 600,
            margin: "0 auto",
            padding: 0,
            backgroundColor: "transparent",
            fontFamily: "-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif",
          },
          progressContainer: {
            width: "100%",
            height: 8,
            backgroundColor: "#e5e7eb",
            borderRadius: 4,
            marginBottom: 32,
            overflow: "hidden",
          },
          progressBar: {
            height: "100%",
            backgroundColor: "#1E88E5", // CourseCreator360 blue
            borderRadius: 4,
            transition: "width 0.3s ease",
          },
          stepContainer: {
            marginBottom: 32,
          },
          heading: {
            fontSize: "1.75rem",
            fontWeight: 600,
            marginBottom: 16,
            lineHeight: 1.3,
            color: "#111827",
          },
          subtext: {
            fontSize: "1rem",
            color: "#6b7280",
            marginBottom: 24,
            lineHeight: 1.5,
          },
          optionList: {
            display: "flex",
            flexDirection: "column",
            gap: 12,
          },
          optionItem: {
            display: "flex",
            alignItems: "center",
            padding: "16px 20px",
            border: "2px solid #e5e7eb",
            borderRadius: 8,
            cursor: "pointer",
            fontSize: "1rem",
            color: "#374151",
            backgroundColor: "#ffffff",
            transition: "all 0.2s ease",
          },
          radio: {
            marginRight: 12,
            width: 20,
            height: 20,
            cursor: "pointer",
          },
          textInput: {
            width: "100%",
            padding: "12px 16px",
            marginTop: 16,
            fontSize: "1rem",
            border: "2px solid #e5e7eb",
            borderRadius: 8,
            outline: "none",
            transition: "border-color 0.2s ease",
            boxSizing: "border-box",
          },
          textArea: {
            width: "100%",
            padding: "12px 16px",
            fontSize: "1rem",
            border: "2px solid #e5e7eb",
            borderRadius: 8,
            outline: "none",
            resize: "vertical",
            minHeight: 120,
            transition: "border-color 0.2s ease",
            fontFamily: "inherit",
            boxSizing: "border-box",
          },
          counter: {
            fontSize: "0.875rem",
            color: "#9ca3af",
            textAlign: "right",
            marginTop: 8,
          },
          buttonRow: {
            display: "flex",
            justifyContent: "space-between",
            gap: 16,
            marginTop: 32,
          },
          button: {
            flex: 1,
            padding: "14px 24px",
            fontSize: "1rem",
            fontWeight: 600,
            borderRadius: 8,
            border: "none",
            cursor: "pointer",
            transition: "all 0.2s ease",
          },
          backButton: {
            backgroundColor: "#f3f4f6",
            color: "#374151",
          },
          primaryButton: {
            backgroundColor: "#1E88E5",
            color: "#ffffff",
          },
        };

        // Render the component
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OnboardingSurveyWidget />);
    </script>
</body>

</html>